// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`stack snapshots 1`] = `
Object {
  "Description": "(SO0190-ApiService) - Automated Data Analytics on AWS. Version v1.3.0",
  "Outputs": Object {
    "AdaApiServiceFederatedApiAccessRequestTableC2AE5655Arn": Object {
      "Value": Object {
        "Fn::GetAtt": Array [
          "AccessRequestTable",
          "Arn",
        ],
      },
    },
    "AdaApiServiceFederatedApiAccessRequestTableC2AE5655Ref": Object {
      "Value": Object {
        "Ref": "AccessRequestTable",
      },
    },
    "AdaApiServiceFederatedApiApiAccessPolicyTable4950D7A5Ref": Object {
      "Value": Object {
        "Ref": "ApiAccessPolicyTable",
      },
    },
    "AdaApiServiceFederatedApiCustomAuthorizerHandler80C96C55Ref": Object {
      "Value": Object {
        "Ref": "FederatedApiCustomAuthorizerHandlerFACFB2CE",
      },
    },
    "AdaApiServiceFederatedApiFederatedRestApi1FB0E4F5Ref": Object {
      "Value": Object {
        "Ref": "FederatedApiFederatedRestApi4B626648",
      },
    },
    "AdaApiServiceFederatedApiFederatedRestApi1FB0E4F5RootResourceId": Object {
      "Value": Object {
        "Fn::GetAtt": Array [
          "FederatedApiFederatedRestApi4B626648",
          "RootResourceId",
        ],
      },
    },
    "AdaApiServiceFederatedApiFederatedRestApiFederatedRestApiErrorModelD8BFCFCERef": Object {
      "Value": Object {
        "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
      },
    },
    "AdaApiServiceFederatedApiFederatedRestApiFederatedRestApiValidator5117C971Ref": Object {
      "Value": Object {
        "Ref": "FederatedApiFederatedRestApiFederatedRestApiValidator97C78498",
      },
    },
    "AdaApiServiceFederatedApiGroupsTable23FA2F15Arn": Object {
      "Value": Object {
        "Fn::GetAtt": Array [
          "GroupsTable",
          "Arn",
        ],
      },
    },
    "AdaApiServiceFederatedApiGroupsTable23FA2F15Ref": Object {
      "Value": Object {
        "Ref": "GroupsTable",
      },
    },
    "AdaApiServiceFederatedApiIdentityMachineTableA214BDA9Arn": Object {
      "Value": Object {
        "Fn::GetAtt": Array [
          "IdentityMachineTable",
          "Arn",
        ],
      },
    },
    "AdaApiServiceFederatedApiIdentityMachineTableA214BDA9Ref": Object {
      "Value": Object {
        "Ref": "IdentityMachineTable",
      },
    },
    "AdaApiServiceFederatedApiIdentityMachineTokenTable8CEA4342Arn": Object {
      "Value": Object {
        "Fn::GetAtt": Array [
          "IdentityMachineTokenTable",
          "Arn",
        ],
      },
    },
    "AdaApiServiceFederatedApiIdentityMachineTokenTable8CEA4342Ref": Object {
      "Value": Object {
        "Ref": "IdentityMachineTokenTable",
      },
    },
  },
  "Parameters": Object {
    "referencetoAdaApiWafDeploymentSecretCA25FA9ARef": Object {
      "Type": "String",
    },
    "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Arn": Object {
      "Type": "String",
    },
    "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Ref": Object {
      "Type": "String",
    },
    "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolCognitoDomain8B19C675Ref": Object {
      "Type": "String",
    },
    "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn": Object {
      "Type": "String",
    },
    "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref": Object {
      "Type": "String",
    },
    "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Arn": Object {
      "Type": "String",
    },
    "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Ref": Object {
      "Type": "String",
    },
    "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Arn": Object {
      "Type": "String",
    },
    "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Ref": Object {
      "Type": "String",
    },
    "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550EArn": Object {
      "Type": "String",
    },
    "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550ERef": Object {
      "Type": "String",
    },
    "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableAccessRequestTable3CBA9695Arn": Object {
      "Type": "String",
    },
    "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableApiAccessPolicyTable0958670AArn": Object {
      "Type": "String",
    },
    "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableGroupsTable715E88D9Arn": Object {
      "Type": "String",
    },
    "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableIdentityMachineTableD776DA41Arn": Object {
      "Type": "String",
    },
    "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableIdentityMachineTokenTableC84EAEE4Arn": Object {
      "Type": "String",
    },
    "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableLocks696688D7Arn": Object {
      "Type": "String",
    },
    "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableRelationships0CDF4443Arn": Object {
      "Type": "String",
    },
    "referencetoAdaLayer6FB4FEF4Ref": Object {
      "Type": "String",
    },
    "referencetoAdaadminEmail7EA005BFRef": Object {
      "Type": "String",
    },
    "referencetoAdaadvancedSecurityModeA861D946Ref": Object {
      "Type": "String",
    },
    "referencetoAdaautoAssociateAdminAC12C094Ref": Object {
      "Type": "String",
    },
  },
  "Resources": Object {
    "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C": Object {
      "DependsOn": Array [
        "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": "cdk-#####",
          "S3Key": "cdkhash######.zip",
        },
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
        "Timeout": 120,
      },
      "Type": "AWS::Lambda::Function",
    },
    "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "AccessRequestTable": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AttributeDefinitions": Array [
          Object {
            "AttributeName": "groupId",
            "AttributeType": "S",
          },
          Object {
            "AttributeName": "userId",
            "AttributeType": "S",
          },
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "KeySchema": Array [
          Object {
            "AttributeName": "groupId",
            "KeyType": "HASH",
          },
          Object {
            "AttributeName": "userId",
            "KeyType": "RANGE",
          },
        ],
        "PointInTimeRecoverySpecification": Object {
          "PointInTimeRecoveryEnabled": true,
        },
        "SSESpecification": Object {
          "KMSMasterKeyId": Object {
            "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableAccessRequestTable3CBA9695Arn",
          },
          "SSEEnabled": true,
          "SSEType": "KMS",
        },
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::DynamoDB::Table",
      "UpdateReplacePolicy": "Delete",
    },
    "ApiAccessPolicyTable": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AttributeDefinitions": Array [
          Object {
            "AttributeName": "apiAccessPolicyId",
            "AttributeType": "S",
          },
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "KeySchema": Array [
          Object {
            "AttributeName": "apiAccessPolicyId",
            "KeyType": "HASH",
          },
        ],
        "PointInTimeRecoverySpecification": Object {
          "PointInTimeRecoveryEnabled": true,
        },
        "SSESpecification": Object {
          "KMSMasterKeyId": Object {
            "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableApiAccessPolicyTable0958670AArn",
          },
          "SSEEnabled": true,
          "SSEType": "KMS",
        },
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::DynamoDB::Table",
      "UpdateReplacePolicy": "Delete",
    },
    "ApiTeardown7F2E4F4C": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "ApiTeardownCustomResourcePolicyD239BEC3",
      ],
      "Properties": Object {
        "Delete": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"APIGateway\\",\\"action\\":\\"deleteRestApi\\",\\"parameters\\":{\\"restApiId\\":\\"",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "ApiTeardownCustomResourcePolicyD239BEC3": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "apigateway:DELETE",
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":apigateway:ap-southeast-1:1111111111:restapis/",
                      Object {
                        "Ref": "FederatedApiFederatedRestApi4B626648",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":apigateway:ap-southeast-1::/restapis/",
                      Object {
                        "Ref": "FederatedApiFederatedRestApi4B626648",
                      },
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "ApiTeardownCustomResourcePolicyD239BEC3",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "AppRegistryAssociation": Object {
      "Properties": Object {
        "Application": Object {
          "Fn::Join": Array [
            "-",
            Array [
              "Automated-Data-Analysis-on-AWS",
              Object {
                "Ref": "AWS::Region",
              },
              Object {
                "Ref": "AWS::AccountId",
              },
            ],
          ],
        },
        "Resource": Object {
          "Ref": "AWS::StackId",
        },
        "ResourceType": "CFN_STACK",
      },
      "Type": "AWS::ServiceCatalogAppRegistry::ResourceAssociation",
    },
    "FederatedApiAccessRequestTableCounterInitialization71CA00CC": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiAccessRequestTableCounterInitializationCustomResourcePolicyA298FDE2",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"DynamoDB\\",\\"action\\":\\"putItem\\",\\"parameters\\":{\\"TableName\\":\\"",
              Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
              },
              "\\",\\"Item\\":{\\"tableName\\":{\\"S\\":\\"",
              Object {
                "Ref": "AccessRequestTable",
              },
              "\\"},\\"count\\":{\\"N\\":\\"0\\"}}},\\"physicalResourceId\\":{\\"id\\":\\"AccessRequestTable-3792\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiAccessRequestTableCounterInitializationCustomResourcePolicyA298FDE2": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "dynamodb:PutItem",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiAccessRequestTableCounterInitializationCustomResourcePolicyA298FDE2",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyA4034797": Object {
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyServiceRoleDefaultPolicyE50B9FC4",
        "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyServiceRoleF7A23509",
      ],
      "Properties": Object {
        "Architectures": Array [
          "x86_64",
        ],
        "Code": Object {
          "S3Bucket": "cdk-#####",
          "S3Key": "cdkhash######.zip",
        },
        "Description": "TypescriptFunction Ada/ApiService/FederatedApi/ApiAccessPolicyRoutes/LambdaDeletePolicy of delete-policy.ts",
        "Environment": Object {
          "Variables": Object {
            "API_ACCESS_POLICY_TABLE_NAME": Object {
              "Ref": "ApiAccessPolicyTable",
            },
            "API_ENDPOINT": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "https://",
                  Object {
                    "Ref": "FederatedApiFederatedRestApi4B626648",
                  },
                  ".execute-api.ap-southeast-1.amazonaws.com/prod/",
                ],
              ],
            },
            "API_WAF_ALLOW_RULE_SECRET": Object {
              "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "COUNTER_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
            },
            "INTERNAL_TOKEN_KMS_KEY": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550ERef",
            },
            "INTERNAL_TOKEN_SECRET_NAME": "sign-internal-token2855ghashx",
            "LOCK_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Ref",
            },
            "RELATIONSHIP_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Ref",
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Ref": "referencetoAdaLayer6FB4FEF4Ref",
          },
        ],
        "MemorySize": 1024,
        "Role": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyServiceRoleF7A23509",
            "Arn",
          ],
        },
        "Runtime": "nodejs16.x",
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
        "Timeout": 30,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyServiceRoleDefaultPolicyE50B9FC4": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550EArn",
              },
            },
            Object {
              "Action": "secretsManager:GetSecretValue",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:ap-southeast-1:1111111111:secret:sign-internal-token2855ghashx*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableLocks696688D7Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableRelationships0CDF4443Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableApiAccessPolicyTable0958670AArn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "ApiAccessPolicyTable",
                    "Arn",
                  ],
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyServiceRoleDefaultPolicyE50B9FC4",
        "Roles": Array [
          Object {
            "Ref": "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyServiceRoleF7A23509",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyServiceRoleF7A23509": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyDDAF129E": Object {
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyServiceRoleDefaultPolicy4B6B4D7E",
        "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyServiceRoleF13DA91F",
      ],
      "Properties": Object {
        "Architectures": Array [
          "x86_64",
        ],
        "Code": Object {
          "S3Bucket": "cdk-#####",
          "S3Key": "cdkhash######.zip",
        },
        "Description": "TypescriptFunction Ada/ApiService/FederatedApi/ApiAccessPolicyRoutes/LambdaGetPolicy of get-policy.ts",
        "Environment": Object {
          "Variables": Object {
            "API_ACCESS_POLICY_TABLE_NAME": Object {
              "Ref": "ApiAccessPolicyTable",
            },
            "API_ENDPOINT": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "https://",
                  Object {
                    "Ref": "FederatedApiFederatedRestApi4B626648",
                  },
                  ".execute-api.ap-southeast-1.amazonaws.com/prod/",
                ],
              ],
            },
            "API_WAF_ALLOW_RULE_SECRET": Object {
              "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "COUNTER_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
            },
            "INTERNAL_TOKEN_KMS_KEY": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550ERef",
            },
            "INTERNAL_TOKEN_SECRET_NAME": "sign-internal-token2855ghashx",
            "LOCK_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Ref",
            },
            "RELATIONSHIP_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Ref",
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Ref": "referencetoAdaLayer6FB4FEF4Ref",
          },
        ],
        "MemorySize": 1024,
        "Role": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyServiceRoleF13DA91F",
            "Arn",
          ],
        },
        "Runtime": "nodejs16.x",
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
        "Timeout": 30,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyServiceRoleDefaultPolicy4B6B4D7E": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550EArn",
              },
            },
            Object {
              "Action": "secretsManager:GetSecretValue",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:ap-southeast-1:1111111111:secret:sign-internal-token2855ghashx*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableLocks696688D7Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableRelationships0CDF4443Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableApiAccessPolicyTable0958670AArn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "ApiAccessPolicyTable",
                    "Arn",
                  ],
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyServiceRoleDefaultPolicy4B6B4D7E",
        "Roles": Array [
          Object {
            "Ref": "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyServiceRoleF13DA91F",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyServiceRoleF13DA91F": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaListPolicies9D449472": Object {
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesLambdaListPoliciesServiceRoleDefaultPolicy68AFB639",
        "FederatedApiApiAccessPolicyRoutesLambdaListPoliciesServiceRole02750935",
      ],
      "Properties": Object {
        "Architectures": Array [
          "x86_64",
        ],
        "Code": Object {
          "S3Bucket": "cdk-#####",
          "S3Key": "cdkhash######.zip",
        },
        "Description": "TypescriptFunction Ada/ApiService/FederatedApi/ApiAccessPolicyRoutes/LambdaListPolicies of list-policies.ts",
        "Environment": Object {
          "Variables": Object {
            "API_ACCESS_POLICY_TABLE_NAME": Object {
              "Ref": "ApiAccessPolicyTable",
            },
            "API_ENDPOINT": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "https://",
                  Object {
                    "Ref": "FederatedApiFederatedRestApi4B626648",
                  },
                  ".execute-api.ap-southeast-1.amazonaws.com/prod/",
                ],
              ],
            },
            "API_WAF_ALLOW_RULE_SECRET": Object {
              "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "COUNTER_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
            },
            "INTERNAL_TOKEN_KMS_KEY": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550ERef",
            },
            "INTERNAL_TOKEN_SECRET_NAME": "sign-internal-token2855ghashx",
            "LOCK_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Ref",
            },
            "RELATIONSHIP_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Ref",
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Ref": "referencetoAdaLayer6FB4FEF4Ref",
          },
        ],
        "MemorySize": 1024,
        "Role": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaListPoliciesServiceRole02750935",
            "Arn",
          ],
        },
        "Runtime": "nodejs16.x",
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
        "Timeout": 30,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaListPoliciesServiceRole02750935": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaListPoliciesServiceRoleDefaultPolicy68AFB639": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550EArn",
              },
            },
            Object {
              "Action": "secretsManager:GetSecretValue",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:ap-southeast-1:1111111111:secret:sign-internal-token2855ghashx*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableLocks696688D7Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableRelationships0CDF4443Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableApiAccessPolicyTable0958670AArn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "ApiAccessPolicyTable",
                    "Arn",
                  ],
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesLambdaListPoliciesServiceRoleDefaultPolicy68AFB639",
        "Roles": Array [
          Object {
            "Ref": "FederatedApiApiAccessPolicyRoutesLambdaListPoliciesServiceRole02750935",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71": Object {
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesLambdaPutPolicyServiceRoleDefaultPolicy281EB0DE",
        "FederatedApiApiAccessPolicyRoutesLambdaPutPolicyServiceRoleB1D96DB2",
      ],
      "Properties": Object {
        "Architectures": Array [
          "x86_64",
        ],
        "Code": Object {
          "S3Bucket": "cdk-#####",
          "S3Key": "cdkhash######.zip",
        },
        "Description": "TypescriptFunction Ada/ApiService/FederatedApi/ApiAccessPolicyRoutes/LambdaPutPolicy of put-policy.ts",
        "Environment": Object {
          "Variables": Object {
            "API_ACCESS_POLICY_TABLE_NAME": Object {
              "Ref": "ApiAccessPolicyTable",
            },
            "API_ENDPOINT": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "https://",
                  Object {
                    "Ref": "FederatedApiFederatedRestApi4B626648",
                  },
                  ".execute-api.ap-southeast-1.amazonaws.com/prod/",
                ],
              ],
            },
            "API_WAF_ALLOW_RULE_SECRET": Object {
              "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "COUNTER_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
            },
            "INTERNAL_TOKEN_KMS_KEY": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550ERef",
            },
            "INTERNAL_TOKEN_SECRET_NAME": "sign-internal-token2855ghashx",
            "LOCK_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Ref",
            },
            "RELATIONSHIP_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Ref",
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Ref": "referencetoAdaLayer6FB4FEF4Ref",
          },
        ],
        "MemorySize": 1024,
        "Role": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaPutPolicyServiceRoleB1D96DB2",
            "Arn",
          ],
        },
        "Runtime": "nodejs16.x",
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
        "Timeout": 30,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaPutPolicyServiceRoleB1D96DB2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "FederatedApiApiAccessPolicyRoutesLambdaPutPolicyServiceRoleDefaultPolicy281EB0DE": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550EArn",
              },
            },
            Object {
              "Action": "secretsManager:GetSecretValue",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:ap-southeast-1:1111111111:secret:sign-internal-token2855ghashx*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableLocks696688D7Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableRelationships0CDF4443Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableApiAccessPolicyTable0958670AArn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "ApiAccessPolicyTable",
                    "Arn",
                  ],
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesLambdaPutPolicyServiceRoleDefaultPolicy281EB0DE",
        "Roles": Array [
          Object {
            "Ref": "FederatedApiApiAccessPolicyRoutesLambdaPutPolicyServiceRoleB1D96DB2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicyadministratoraccessC09C4849": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicyadministratoraccessCustomResourcePolicy86A8D973",
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanageidentityproviders48F7BA38",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"administrator_access\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"administrator_access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Administrator Access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Full access to all apis, including management of groups, identity providers and api access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-administrator_access\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
        "Update": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"administrator_access\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"administrator_access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Administrator Access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Full access to all apis, including management of groups, identity providers and api access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-administrator_access\\"}}",
            ],
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicyadministratoraccessCustomResourcePolicy86A8D973": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W12",
              "reason": "[*] Resource required for custom resource invoking lambda since scoping to functionArn did not work",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicyadministratoraccessCustomResourcePolicy86A8D973",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicydefaultCustomResourcePolicy4C9A4A32": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W12",
              "reason": "[*] Resource required for custom resource invoking lambda since scoping to functionArn did not work",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicydefaultCustomResourcePolicy4C9A4A32",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicydefaultE999CEE3": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicydefaultCustomResourcePolicy4C9A4A32",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"default\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"default\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Default Access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Access to run queries, view data products and domains, recieve notifications, request group membership, etc\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/api-access-policy\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/api-access-policy/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/data-product/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/governance/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/attributes\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/group\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/group/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/request\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/request/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/permission/user/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/notification\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/notification/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/ontology\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/ontology/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/query/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/POST/query\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/POST/query-parse-render/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/PUT/query/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/DELETE/query/saved-query/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/PUT/notification/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/PUT/identity/request/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/PUT/data-product/domain/*/data-product/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/PUT/governance/policy/domain/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-default\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
        "Update": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"default\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"default\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Default Access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Access to run queries, view data products and domains, recieve notifications, request group membership, etc\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/api-access-policy\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/api-access-policy/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/data-product/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/governance/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/attributes\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/group\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/group/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/request\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/request/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/permission/user/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/notification\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/notification/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/ontology\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/ontology/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/query/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/POST/query\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/POST/query-parse-render/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/PUT/query/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/DELETE/query/saved-query/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/PUT/notification/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/PUT/identity/request/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/PUT/data-product/domain/*/data-product/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/PUT/governance/policy/domain/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-default\\"}}",
            ],
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagecustomscripts7770F289": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagecustomscriptsCustomResourcePolicy5C987F71",
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagedataproducts8C68444D",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"manage_custom_scripts\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"manage_custom_scripts\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Manage Custom Scripts\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Access to create and manage custom transform scripts that will be executed\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product/scripts\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product/scripts/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-manage_custom_scripts\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
        "Update": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"manage_custom_scripts\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"manage_custom_scripts\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Manage Custom Scripts\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Access to create and manage custom transform scripts that will be executed\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product/scripts\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product/scripts/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-manage_custom_scripts\\"}}",
            ],
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagecustomscriptsCustomResourcePolicy5C987F71": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W12",
              "reason": "[*] Resource required for custom resource invoking lambda since scoping to functionArn did not work",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagecustomscriptsCustomResourcePolicy5C987F71",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagedataproducts8C68444D": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagedataproductsCustomResourcePolicyD1170088",
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicyprogrammaticaccessF4AC40CC",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"manage_data_products\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"manage_data_products\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Manage Data Products\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Allows creation, editing, and deletion of data products along with specific permission levels\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product/domain\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product/domain/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product-preview\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product-preview/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance/policy/default-lens\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance/policy/default-lens/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance/policy/domain\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance/policy/domain/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-manage_data_products\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
        "Update": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"manage_data_products\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"manage_data_products\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Manage Data Products\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Allows creation, editing, and deletion of data products along with specific permission levels\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product/domain\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product/domain/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product-preview\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/data-product-preview/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance/policy/default-lens\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance/policy/default-lens/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance/policy/domain\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance/policy/domain/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-manage_data_products\\"}}",
            ],
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagedataproductsCustomResourcePolicyD1170088": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W12",
              "reason": "[*] Resource required for custom resource invoking lambda since scoping to functionArn did not work",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagedataproductsCustomResourcePolicyD1170088",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagegovernance04679724": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagecustomscripts7770F289",
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagegovernanceCustomResourcePolicyCC76333A",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"manage_governance\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"manage_governance\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Manage Governance\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Allows full access to manage governance at both solution and data product levels\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/ontology\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/ontology/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-manage_governance\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
        "Update": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"manage_governance\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"manage_governance\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Manage Governance\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Allows full access to manage governance at both solution and data product levels\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/ontology\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/ontology/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/governance/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-manage_governance\\"}}",
            ],
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagegovernanceCustomResourcePolicyCC76333A": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W12",
              "reason": "[*] Resource required for custom resource invoking lambda since scoping to functionArn did not work",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagegovernanceCustomResourcePolicyCC76333A",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagegroups3DC7C436": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagegovernance04679724",
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagegroupsCustomResourcePolicy86F693E3",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"manage_groups\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"manage_groups\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Manage Groups\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Allows creation of groups, assigning users to groups, actioning access requests\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/group\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/group/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/request\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/request/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/user\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/user/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-manage_groups\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
        "Update": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"manage_groups\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"manage_groups\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Manage Groups\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Allows creation of groups, assigning users to groups, actioning access requests\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/group\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/group/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/request\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/request/*\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/user\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/GET/identity/user/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-manage_groups\\"}}",
            ],
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagegroupsCustomResourcePolicy86F693E3": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W12",
              "reason": "[*] Resource required for custom resource invoking lambda since scoping to functionArn did not work",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagegroupsCustomResourcePolicy86F693E3",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanageidentityproviders48F7BA38": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanagegroups3DC7C436",
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanageidentityprovidersCustomResourcePolicy0498A801",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"manage_identity_providers\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"manage_identity_providers\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Manage Identity Providers\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Access to view, edit, and delete the identity provides for federated access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/provider\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/provider/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-manage_identity_providers\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
        "Update": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"manage_identity_providers\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"manage_identity_providers\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Manage Identity Providers\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Access to view, edit, and delete the identity provides for federated access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/provider\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/provider/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-manage_identity_providers\\"}}",
            ],
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanageidentityprovidersCustomResourcePolicy0498A801": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W12",
              "reason": "[*] Resource required for custom resource invoking lambda since scoping to functionArn did not work",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicymanageidentityprovidersCustomResourcePolicy0498A801",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicyprogrammaticaccessCustomResourcePolicyF16254BE": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W12",
              "reason": "[*] Resource required for custom resource invoking lambda since scoping to functionArn did not work",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicyprogrammaticaccessCustomResourcePolicyF16254BE",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicyprogrammaticaccessF4AC40CC": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicydefaultE999CEE3",
        "FederatedApiApiAccessPolicyRoutesPutDefaultApiPolicyprogrammaticaccessCustomResourcePolicyF16254BE",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"programmatic_access\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"programmatic_access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Programmatic Access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Allows creation and management of api tokens for programmatic access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/machine\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/machine/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-programmatic_access\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
        "Update": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"Lambda\\",\\"action\\":\\"invoke\\",\\"parameters\\":{\\"FunctionName\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                  "Arn",
                ],
              },
              "\\",\\"Payload\\":\\"{\\\\\\"requestContext\\\\\\":{\\\\\\"authorizer\\\\\\":{\\\\\\"x-user-id\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-username\\\\\\":\\\\\\"system\\\\\\",\\\\\\"x-groups\\\\\\":\\\\\\"system\\\\\\"}},\\\\\\"pathParameters\\\\\\":{\\\\\\"apiAccessPolicyId\\\\\\":\\\\\\"programmatic_access\\\\\\"},\\\\\\"body\\\\\\":\\\\\\"{\\\\\\\\\\\\\\"apiAccessPolicyId\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"programmatic_access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Programmatic Access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"description\\\\\\\\\\\\\\":\\\\\\\\\\\\\\"Allows creation and management of api tokens for programmatic access\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"resources\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/machine\\\\\\\\\\\\\\",\\\\\\\\\\\\\\"arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/*/*/identity/machine/*\\\\\\\\\\\\\\"]}\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"PutDefaultApiPolicy-programmatic_access\\"}}",
            ],
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiApiAccessPolicyTableCounterInitializationCustomResourcePolicy025F730A": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "dynamodb:PutItem",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiApiAccessPolicyTableCounterInitializationCustomResourcePolicy025F730A",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiApiAccessPolicyTableCounterInitializationD1CDA98C": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiApiAccessPolicyTableCounterInitializationCustomResourcePolicy025F730A",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"DynamoDB\\",\\"action\\":\\"putItem\\",\\"parameters\\":{\\"TableName\\":\\"",
              Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
              },
              "\\",\\"Item\\":{\\"tableName\\":{\\"S\\":\\"",
              Object {
                "Ref": "ApiAccessPolicyTable",
              },
              "\\"},\\"count\\":{\\"N\\":\\"0\\"}}},\\"physicalResourceId\\":{\\"id\\":\\"ApiAccessPolicyTable-6036\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiCostApiRoutesLambdaGetCostFE428FD3": Object {
      "DependsOn": Array [
        "FederatedApiCostApiRoutesLambdaGetCostServiceRoleDefaultPolicyEAB92B46",
        "FederatedApiCostApiRoutesLambdaGetCostServiceRoleFA19F12B",
      ],
      "Properties": Object {
        "Architectures": Array [
          "x86_64",
        ],
        "Code": Object {
          "S3Bucket": "cdk-#####",
          "S3Key": "cdkhash######.zip",
        },
        "Description": "TypescriptFunction Ada/ApiService/FederatedApi/CostApiRoutes/LambdaGetCost of get-cost.ts",
        "Environment": Object {
          "Variables": Object {
            "API_ENDPOINT": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "https://",
                  Object {
                    "Ref": "FederatedApiFederatedRestApi4B626648",
                  },
                  ".execute-api.ap-southeast-1.amazonaws.com/prod/",
                ],
              ],
            },
            "API_WAF_ALLOW_RULE_SECRET": Object {
              "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "INTERNAL_TOKEN_KMS_KEY": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550ERef",
            },
            "INTERNAL_TOKEN_SECRET_NAME": "sign-internal-token2855ghashx",
            "LOCK_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Ref",
            },
            "RELATIONSHIP_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Ref",
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Ref": "referencetoAdaLayer6FB4FEF4Ref",
          },
        ],
        "MemorySize": 1024,
        "Role": Object {
          "Fn::GetAtt": Array [
            "FederatedApiCostApiRoutesLambdaGetCostServiceRoleFA19F12B",
            "Arn",
          ],
        },
        "Runtime": "nodejs16.x",
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
        "Timeout": 30,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "FederatedApiCostApiRoutesLambdaGetCostServiceRoleDefaultPolicyEAB92B46": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
              },
            },
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550EArn",
              },
            },
            Object {
              "Action": "secretsManager:GetSecretValue",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:ap-southeast-1:1111111111:secret:sign-internal-token2855ghashx*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableLocks696688D7Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableRelationships0CDF4443Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": "ce:GetCostAndUsage*",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiCostApiRoutesLambdaGetCostServiceRoleDefaultPolicyEAB92B46",
        "Roles": Array [
          Object {
            "Ref": "FederatedApiCostApiRoutesLambdaGetCostServiceRoleFA19F12B",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiCostApiRoutesLambdaGetCostServiceRoleFA19F12B": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "FederatedApiCustomAuthorizer1D4794A0": Object {
      "DependsOn": Array [
        "FederatedApiCustomAuthorizerServiceRoleDefaultPolicy660D8DB8",
        "FederatedApiCustomAuthorizerServiceRole2A0F9126",
      ],
      "Properties": Object {
        "Architectures": Array [
          "x86_64",
        ],
        "Code": Object {
          "S3Bucket": "cdk-#####",
          "S3Key": "cdkhash######.zip",
        },
        "Description": "TypescriptFunction Ada/ApiService/FederatedApi/CustomAuthorizer of custom-authorizer.ts",
        "Environment": Object {
          "Variables": Object {
            "API_ACCESS_POLICY_TABLE_NAME": Object {
              "Ref": "ApiAccessPolicyTable",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "COGNITO_DOMAIN": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolCognitoDomain8B19C675Ref",
                  },
                  ".auth.ap-southeast-1.amazoncognito.com",
                ],
              ],
            },
            "COUNTER_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
            },
            "DEFAULT_ACCESS_POLICIES": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "arn:",
                  Object {
                    "Ref": "AWS::Partition",
                  },
                  ":execute-api:ap-southeast-1:1111111111:",
                  Object {
                    "Ref": "FederatedApiFederatedRestApi4B626648",
                  },
                  "/*/GET/identity/group,arn:",
                  Object {
                    "Ref": "AWS::Partition",
                  },
                  ":execute-api:ap-southeast-1:1111111111:",
                  Object {
                    "Ref": "FederatedApiFederatedRestApi4B626648",
                  },
                  "/*/PUT/identity/request/*/*",
                ],
              ],
            },
            "GROUP_TABLE_NAME": Object {
              "Ref": "GroupsTable",
            },
            "INTERNAL_TOKEN_KMS_KEY": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550ERef",
            },
            "INTERNAL_TOKEN_SECRET_NAME": "sign-internal-token2855ghashx",
            "TOKEN_CLIENT_ID_INDEX_NAME": "Token-ClientId7893ghashx",
            "TOKEN_TABLE_NAME": Object {
              "Ref": "IdentityMachineTokenTable",
            },
            "USER_ID_SCOPE": "ada/userid",
            "USER_POOL_ID": Object {
              "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Ref",
            },
          },
        },
        "Handler": "index.handler",
        "MemorySize": 1024,
        "Role": Object {
          "Fn::GetAtt": Array [
            "FederatedApiCustomAuthorizerServiceRole2A0F9126",
            "Arn",
          ],
        },
        "Runtime": "nodejs16.x",
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
        "Timeout": 30,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "FederatedApiCustomAuthorizerAdaApiServiceFederatedApiCustomAuthorizerHandlerA29A3A80PermissionsCF068A93": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiCustomAuthorizer1D4794A0",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/authorizers/",
              Object {
                "Ref": "FederatedApiCustomAuthorizerHandlerFACFB2CE",
              },
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiCustomAuthorizerHandlerFACFB2CE": Object {
      "Properties": Object {
        "AuthorizerResultTtlInSeconds": 900,
        "AuthorizerUri": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Fn::Select": Array [
                  1,
                  Object {
                    "Fn::Split": Array [
                      ":",
                      Object {
                        "Fn::GetAtt": Array [
                          "FederatedApiCustomAuthorizer1D4794A0",
                          "Arn",
                        ],
                      },
                    ],
                  },
                ],
              },
              ":apigateway:",
              Object {
                "Fn::Select": Array [
                  3,
                  Object {
                    "Fn::Split": Array [
                      ":",
                      Object {
                        "Fn::GetAtt": Array [
                          "FederatedApiCustomAuthorizer1D4794A0",
                          "Arn",
                        ],
                      },
                    ],
                  },
                ],
              },
              ":lambda:path/2015-03-31/functions/",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiCustomAuthorizer1D4794A0",
                  "Arn",
                ],
              },
              "/invocations",
            ],
          ],
        },
        "IdentitySource": "method.request.header.Authorization",
        "Name": "AdaApiServiceFederatedApiCustomAuthorizerHandlerA29A3A80",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
        "Type": "REQUEST",
      },
      "Type": "AWS::ApiGateway::Authorizer",
    },
    "FederatedApiCustomAuthorizerServiceRole2A0F9126": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "FederatedApiCustomAuthorizerServiceRoleDefaultPolicy660D8DB8": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550EArn",
              },
            },
            Object {
              "Action": "secretsManager:GetSecretValue",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:ap-southeast-1:1111111111:secret:sign-internal-token2855ghashx*",
                  ],
                ],
              },
            },
            Object {
              "Action": "cognito-idp:AdminGetUser",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Arn",
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableApiAccessPolicyTable0958670AArn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "ApiAccessPolicyTable",
                    "Arn",
                  ],
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableGroupsTable715E88D9Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "GroupsTable",
                    "Arn",
                  ],
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableIdentityMachineTokenTableC84EAEE4Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IdentityMachineTokenTable",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IdentityMachineTokenTable",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiCustomAuthorizerServiceRoleDefaultPolicy660D8DB8",
        "Roles": Array [
          Object {
            "Ref": "FederatedApiCustomAuthorizerServiceRole2A0F9126",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiFederatedRestApi4B626648": Object {
      "Properties": Object {
        "Name": "FederatedRestApi7893ghashx",
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::ApiGateway::RestApi",
    },
    "FederatedApiFederatedRestApiAccount2C6CA1E4": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiFederatedRestApi4B626648",
      ],
      "Properties": Object {
        "CloudWatchRoleArn": Object {
          "Fn::GetAtt": Array [
            "FederatedApiFederatedRestApiCloudWatchRole97A69D0A",
            "Arn",
          ],
        },
      },
      "Type": "AWS::ApiGateway::Account",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiFederatedRestApiApiAccessPolicyDD17746E": Object {
      "Properties": Object {
        "ParentId": Object {
          "Fn::GetAtt": Array [
            "FederatedApiFederatedRestApi4B626648",
            "RootResourceId",
          ],
        },
        "PathPart": "api-access-policy",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "FederatedApiFederatedRestApiCloudWatchRole97A69D0A": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "apigateway.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiFederatedRestApiCostBFA0C843": Object {
      "Properties": Object {
        "ParentId": Object {
          "Fn::GetAtt": Array [
            "FederatedApiFederatedRestApi4B626648",
            "RootResourceId",
          ],
        },
        "PathPart": "cost",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5": Object {
      "Properties": Object {
        "ContentType": "application/json",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
        "Schema": Object {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "properties": Object {
            "cause": Object {
              "type": "string",
            },
            "details": Object {
              "type": "string",
            },
            "errorId": Object {
              "type": "string",
            },
            "message": Object {
              "type": "string",
            },
            "name": Object {
              "type": "string",
            },
          },
          "required": Array [
            "message",
          ],
          "title": "GenericError",
          "type": "object",
        },
      },
      "Type": "AWS::ApiGateway::Model",
    },
    "FederatedApiFederatedRestApiFederatedRestApiValidator97C78498": Object {
      "Properties": Object {
        "Name": "FederatedRestApi-Validator",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
        "ValidateRequestBody": true,
        "ValidateRequestParameters": true,
      },
      "Type": "AWS::ApiGateway::RequestValidator",
    },
    "FederatedApiFederatedRestApiGatewayResponseBADREQUESTBODY0230F285": Object {
      "Properties": Object {
        "ResponseParameters": Object {
          "gatewayresponse.header.Access-Control-Allow-Headers": "'*'",
          "gatewayresponse.header.Access-Control-Allow-Origin": "'*'",
        },
        "ResponseTemplates": Object {
          "application/json": "{\\"message\\": \\"$context.error.validationErrorString\\"}",
        },
        "ResponseType": "BAD_REQUEST_BODY",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
        "StatusCode": "400",
      },
      "Type": "AWS::ApiGateway::GatewayResponse",
    },
    "FederatedApiFederatedRestApiGatewayResponseDEFAULT5XXD10DDA13": Object {
      "Properties": Object {
        "ResponseParameters": Object {
          "gatewayresponse.header.Access-Control-Allow-Headers": "'*'",
          "gatewayresponse.header.Access-Control-Allow-Origin": "'*'",
        },
        "ResponseTemplates": Object {
          "application/json": "{\\"statusCode\\": \\"'409'\\", \\"message\\": \\"Failed to service request\\", \\"resourcePath\\": \\"$context.resourcePath\\",",
        },
        "ResponseType": "DEFAULT_5XX",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
        "StatusCode": "409",
      },
      "Type": "AWS::ApiGateway::GatewayResponse",
    },
    "FederatedApiFederatedRestApiOPTIONSDAF42E56": Object {
      "Properties": Object {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": Object {
          "IntegrationResponses": Array [
            Object {
              "ResponseParameters": Object {
                "method.response.header.Access-Control-Allow-Headers": "'Authorization,*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Max-Age": "'600'",
              },
              "StatusCode": "200",
            },
          ],
          "RequestTemplates": Object {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": Array [
          Object {
            "ResponseParameters": Object {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Max-Age": true,
            },
            "StatusCode": "200",
          },
        ],
        "ResourceId": Object {
          "Fn::GetAtt": Array [
            "FederatedApiFederatedRestApi4B626648",
            "RootResourceId",
          ],
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApiPermission320C5468": Object {
      "Properties": Object {
        "ParentId": Object {
          "Fn::GetAtt": Array [
            "FederatedApiFederatedRestApi4B626648",
            "RootResourceId",
          ],
        },
        "PathPart": "permission",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyApiAccessPolicyId77F0AC66": Object {
      "Properties": Object {
        "ParentId": Object {
          "Ref": "FederatedApiFederatedRestApiApiAccessPolicyDD17746E",
        },
        "PathPart": "{apiAccessPolicyId}",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyGET03244601": Object {
      "DependsOn": Array [
        "FederatedApiFederatedRestApiapiaccesspolicyOPTIONS7ECA6862",
      ],
      "Properties": Object {
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": Object {
          "Ref": "FederatedApiCustomAuthorizerHandlerFACFB2CE",
        },
        "HttpMethod": "GET",
        "Integration": Object {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:ap-southeast-1:lambda:path/2015-03-31/functions/",
                Object {
                  "Fn::GetAtt": Array [
                    "FederatedApiApiAccessPolicyRoutesLambdaListPolicies9D449472",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "MethodResponses": Array [
          Object {
            "ResponseModels": Object {},
            "StatusCode": "200",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "400",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "403",
          },
        ],
        "OperationName": "ListApiAccessPolicies",
        "RequestParameters": Object {
          "method.request.querystring.limit": false,
          "method.request.querystring.nextToken": false,
          "method.request.querystring.pageSize": false,
        },
        "RequestValidatorId": Object {
          "Ref": "FederatedApiFederatedRestApiFederatedRestApiValidator97C78498",
        },
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApiApiAccessPolicyDD17746E",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyGETApiPermissionAdaApiServiceFederatedApiFederatedRestApi9CF92F0CGETApiAccessPolicy66692300": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaListPolicies9D449472",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/prod/GET/api-access-policy",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyGETApiPermissionTestAdaApiServiceFederatedApiFederatedRestApi9CF92F0CGETApiAccessPolicy333B2575": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaListPolicies9D449472",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/test-invoke-stage/GET/api-access-policy",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyOPTIONS7ECA6862": Object {
      "Properties": Object {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": Object {
          "IntegrationResponses": Array [
            Object {
              "ResponseParameters": Object {
                "method.response.header.Access-Control-Allow-Headers": "'Authorization,*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Max-Age": "'600'",
              },
              "StatusCode": "200",
            },
          ],
          "RequestTemplates": Object {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": Array [
          Object {
            "ResponseParameters": Object {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Max-Age": true,
            },
            "StatusCode": "200",
          },
        ],
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApiApiAccessPolicyDD17746E",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdDELETE985BBAFF": Object {
      "DependsOn": Array [
        "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdPUT6315C346",
      ],
      "Properties": Object {
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": Object {
          "Ref": "FederatedApiCustomAuthorizerHandlerFACFB2CE",
        },
        "HttpMethod": "DELETE",
        "Integration": Object {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:ap-southeast-1:lambda:path/2015-03-31/functions/",
                Object {
                  "Fn::GetAtt": Array [
                    "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyA4034797",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "MethodResponses": Array [
          Object {
            "ResponseModels": Object {},
            "StatusCode": "200",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "400",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "403",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "404",
          },
        ],
        "OperationName": "DeleteApiAccessPolicy",
        "RequestParameters": Object {
          "method.request.path.apiAccessPolicyId": true,
        },
        "RequestValidatorId": Object {
          "Ref": "FederatedApiFederatedRestApiFederatedRestApiValidator97C78498",
        },
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApiapiaccesspolicyApiAccessPolicyId77F0AC66",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdDELETEApiPermissionAdaApiServiceFederatedApiFederatedRestApi9CF92F0CDELETEApiAccessPolicyApiAccessPolicyId2532C31F": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyA4034797",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/prod/DELETE/api-access-policy/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdDELETEApiPermissionTestAdaApiServiceFederatedApiFederatedRestApi9CF92F0CDELETEApiAccessPolicyApiAccessPolicyId7113F974": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaDeletePolicyA4034797",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/test-invoke-stage/DELETE/api-access-policy/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdGET30806867": Object {
      "DependsOn": Array [
        "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdOPTIONSDE3C07F9",
      ],
      "Properties": Object {
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": Object {
          "Ref": "FederatedApiCustomAuthorizerHandlerFACFB2CE",
        },
        "HttpMethod": "GET",
        "Integration": Object {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:ap-southeast-1:lambda:path/2015-03-31/functions/",
                Object {
                  "Fn::GetAtt": Array [
                    "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyDDAF129E",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "MethodResponses": Array [
          Object {
            "ResponseModels": Object {},
            "StatusCode": "200",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "400",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "403",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "404",
          },
        ],
        "OperationName": "GetApiAccessPolicy",
        "RequestParameters": Object {
          "method.request.path.apiAccessPolicyId": true,
        },
        "RequestValidatorId": Object {
          "Ref": "FederatedApiFederatedRestApiFederatedRestApiValidator97C78498",
        },
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApiapiaccesspolicyApiAccessPolicyId77F0AC66",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdGETApiPermissionAdaApiServiceFederatedApiFederatedRestApi9CF92F0CGETApiAccessPolicyApiAccessPolicyId040E638E": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyDDAF129E",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/prod/GET/api-access-policy/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdGETApiPermissionTestAdaApiServiceFederatedApiFederatedRestApi9CF92F0CGETApiAccessPolicyApiAccessPolicyIdDBB30C7F": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaGetPolicyDDAF129E",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/test-invoke-stage/GET/api-access-policy/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdOPTIONSDE3C07F9": Object {
      "Properties": Object {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": Object {
          "IntegrationResponses": Array [
            Object {
              "ResponseParameters": Object {
                "method.response.header.Access-Control-Allow-Headers": "'Authorization,*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Max-Age": "'600'",
              },
              "StatusCode": "200",
            },
          ],
          "RequestTemplates": Object {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": Array [
          Object {
            "ResponseParameters": Object {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Max-Age": true,
            },
            "StatusCode": "200",
          },
        ],
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApiapiaccesspolicyApiAccessPolicyId77F0AC66",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdPUT6315C346": Object {
      "DependsOn": Array [
        "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdGET30806867",
      ],
      "Properties": Object {
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": Object {
          "Ref": "FederatedApiCustomAuthorizerHandlerFACFB2CE",
        },
        "HttpMethod": "PUT",
        "Integration": Object {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:ap-southeast-1:lambda:path/2015-03-31/functions/",
                Object {
                  "Fn::GetAtt": Array [
                    "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "MethodResponses": Array [
          Object {
            "ResponseModels": Object {},
            "StatusCode": "200",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "400",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "403",
          },
        ],
        "OperationName": "PutApiAccessPolicy",
        "RequestModels": Object {
          "application/json": Object {
            "Ref": "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdPutApiAccessPolicyRequest39ED14BC",
          },
        },
        "RequestParameters": Object {
          "method.request.path.apiAccessPolicyId": true,
        },
        "RequestValidatorId": Object {
          "Ref": "FederatedApiFederatedRestApiFederatedRestApiValidator97C78498",
        },
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApiapiaccesspolicyApiAccessPolicyId77F0AC66",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdPUTApiPermissionAdaApiServiceFederatedApiFederatedRestApi9CF92F0CPUTApiAccessPolicyApiAccessPolicyId442610DC": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/prod/PUT/api-access-policy/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdPUTApiPermissionTestAdaApiServiceFederatedApiFederatedRestApi9CF92F0CPUTApiAccessPolicyApiAccessPolicyIdB1ACDA21": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiApiAccessPolicyRoutesLambdaPutPolicy1D1E7D71",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/test-invoke-stage/PUT/api-access-policy/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApiapiaccesspolicyapiAccessPolicyIdPutApiAccessPolicyRequest39ED14BC": Object {
      "Properties": Object {
        "ContentType": "application/json",
        "Description": "Details of the api access policy to create/update",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
        "Schema": Object {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "definitions": Object {
            "ApiAccessPolicyIdentifier": Object {
              "properties": Object {
                "apiAccessPolicyId": Object {
                  "description": "Identifier for an api access policy",
                  "maxLength": 256,
                  "minLength": 2,
                  "pattern": "^[a-z][a-z_0-9]*$",
                  "type": "string",
                },
              },
              "required": Array [
                "apiAccessPolicyId",
              ],
              "type": "object",
            },
          },
          "properties": Object {
            "apiAccessPolicyId": Object {
              "description": "Identifier for an api access policy",
              "maxLength": 256,
              "minLength": 2,
              "pattern": "^[a-z][a-z_0-9]*$",
              "type": "string",
            },
            "description": Object {
              "description": "Description of the api access policy",
              "maxLength": 2048,
              "pattern": "^[\\\\w+ _.:,\\\\/*&%$#=+-@?!|()\\"'\\\\]\\\\[]*$",
              "type": "string",
            },
            "name": Object {
              "description": "Name of the api access policy",
              "maxLength": 2048,
              "minLength": 2,
              "pattern": "^[\\\\w _-]*$",
              "type": "string",
            },
            "resources": Object {
              "items": Object {
                "description": "Resource arn for execute-api:Invoke permission associated with the policy",
                "maxLength": 2048,
                "pattern": "^arn:[^:]+:execute-api:[^:]+:[0-9]+:[^\\\\/]+\\\\/.*$",
                "type": "string",
              },
              "type": "array",
            },
            "updatedTimestamp": Object {
              "maxLength": 64,
              "pattern": "^(\\\\d{4})-(\\\\d{2})-(\\\\d{2})(?:T(\\\\d{2}):(\\\\d{2}):(\\\\d{2}(?:\\\\.\\\\d*)?)((-(\\\\d{2}):(\\\\d{2})|Z)?))?$",
              "type": "string",
            },
          },
          "required": Array [
            "apiAccessPolicyId",
            "name",
            "resources",
          ],
          "title": "PutApiAccessPolicyRequest",
          "type": "object",
        },
      },
      "Type": "AWS::ApiGateway::Model",
    },
    "FederatedApiFederatedRestApicostGETA93F13B5": Object {
      "DependsOn": Array [
        "FederatedApiFederatedRestApicostOPTIONS031F695C",
      ],
      "Properties": Object {
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": Object {
          "Ref": "FederatedApiCustomAuthorizerHandlerFACFB2CE",
        },
        "HttpMethod": "GET",
        "Integration": Object {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:ap-southeast-1:lambda:path/2015-03-31/functions/",
                Object {
                  "Fn::GetAtt": Array [
                    "FederatedApiCostApiRoutesLambdaGetCostFE428FD3",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "MethodResponses": Array [
          Object {
            "ResponseModels": Object {},
            "StatusCode": "200",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "400",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "403",
          },
        ],
        "OperationName": "listCosts",
        "RequestParameters": Object {
          "method.request.querystring.endTimestamp": true,
          "method.request.querystring.startTimestamp": true,
        },
        "RequestValidatorId": Object {
          "Ref": "FederatedApiFederatedRestApiFederatedRestApiValidator97C78498",
        },
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApiCostBFA0C843",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApicostGETApiPermissionAdaApiServiceFederatedApiFederatedRestApi9CF92F0CGETCostD002A5DE": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiCostApiRoutesLambdaGetCostFE428FD3",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/prod/GET/cost",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApicostGETApiPermissionTestAdaApiServiceFederatedApiFederatedRestApi9CF92F0CGETCost0DA4AC1C": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiCostApiRoutesLambdaGetCostFE428FD3",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/test-invoke-stage/GET/cost",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApicostOPTIONS031F695C": Object {
      "Properties": Object {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": Object {
          "IntegrationResponses": Array [
            Object {
              "ResponseParameters": Object {
                "method.response.header.Access-Control-Allow-Headers": "'Authorization,*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Max-Age": "'600'",
              },
              "StatusCode": "200",
            },
          ],
          "RequestTemplates": Object {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": Array [
          Object {
            "ResponseParameters": Object {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Max-Age": true,
            },
            "StatusCode": "200",
          },
        ],
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApiCostBFA0C843",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApipermissionOPTIONS4C8552DE": Object {
      "Properties": Object {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": Object {
          "IntegrationResponses": Array [
            Object {
              "ResponseParameters": Object {
                "method.response.header.Access-Control-Allow-Headers": "'Authorization,*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Max-Age": "'600'",
              },
              "StatusCode": "200",
            },
          ],
          "RequestTemplates": Object {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": Array [
          Object {
            "ResponseParameters": Object {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Max-Age": true,
            },
            "StatusCode": "200",
          },
        ],
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApiPermission320C5468",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApipermissionUserE1DE23C8": Object {
      "Properties": Object {
        "ParentId": Object {
          "Ref": "FederatedApiFederatedRestApiPermission320C5468",
        },
        "PathPart": "user",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "FederatedApiFederatedRestApipermissionuserOPTIONSBFEA1350": Object {
      "Properties": Object {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": Object {
          "IntegrationResponses": Array [
            Object {
              "ResponseParameters": Object {
                "method.response.header.Access-Control-Allow-Headers": "'Authorization,*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Max-Age": "'600'",
              },
              "StatusCode": "200",
            },
          ],
          "RequestTemplates": Object {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": Array [
          Object {
            "ResponseParameters": Object {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Max-Age": true,
            },
            "StatusCode": "200",
          },
        ],
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApipermissionUserE1DE23C8",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApipermissionuserUserId0CFB77E2": Object {
      "Properties": Object {
        "ParentId": Object {
          "Ref": "FederatedApiFederatedRestApipermissionUserE1DE23C8",
        },
        "PathPart": "{userId}",
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "FederatedApiFederatedRestApipermissionuseruserIdGETApiPermissionAdaApiServiceFederatedApiFederatedRestApi9CF92F0CGETPermissionUserUserId96394801": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiPermissionsApiRoutesLambdaListUserPermission7F5BA43A",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/prod/GET/permission/user/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApipermissionuseruserIdGETApiPermissionTestAdaApiServiceFederatedApiFederatedRestApi9CF92F0CGETPermissionUserUserId8A17FB35": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiPermissionsApiRoutesLambdaListUserPermission7F5BA43A",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:ap-southeast-1:1111111111:",
              Object {
                "Ref": "FederatedApiFederatedRestApi4B626648",
              },
              "/test-invoke-stage/GET/permission/user/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiFederatedRestApipermissionuseruserIdGETB4B5D8DC": Object {
      "DependsOn": Array [
        "FederatedApiFederatedRestApipermissionuseruserIdOPTIONS39A666CC",
      ],
      "Properties": Object {
        "AuthorizationType": "CUSTOM",
        "AuthorizerId": Object {
          "Ref": "FederatedApiCustomAuthorizerHandlerFACFB2CE",
        },
        "HttpMethod": "GET",
        "Integration": Object {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:ap-southeast-1:lambda:path/2015-03-31/functions/",
                Object {
                  "Fn::GetAtt": Array [
                    "FederatedApiPermissionsApiRoutesLambdaListUserPermission7F5BA43A",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "MethodResponses": Array [
          Object {
            "ResponseModels": Object {},
            "StatusCode": "200",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "400",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "403",
          },
          Object {
            "ResponseModels": Object {
              "application/json": Object {
                "Ref": "FederatedApiFederatedRestApiFederatedRestApiErrorModel6C6C15A5",
              },
            },
            "StatusCode": "404",
          },
        ],
        "OperationName": "GetPermissionUser",
        "RequestParameters": Object {
          "method.request.path.userId": true,
        },
        "RequestValidatorId": Object {
          "Ref": "FederatedApiFederatedRestApiFederatedRestApiValidator97C78498",
        },
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApipermissionuserUserId0CFB77E2",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiFederatedRestApipermissionuseruserIdOPTIONS39A666CC": Object {
      "Properties": Object {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": Object {
          "IntegrationResponses": Array [
            Object {
              "ResponseParameters": Object {
                "method.response.header.Access-Control-Allow-Headers": "'Authorization,*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Max-Age": "'600'",
              },
              "StatusCode": "200",
            },
          ],
          "RequestTemplates": Object {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": Array [
          Object {
            "ResponseParameters": Object {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Max-Age": true,
            },
            "StatusCode": "200",
          },
        ],
        "ResourceId": Object {
          "Ref": "FederatedApiFederatedRestApipermissionuserUserId0CFB77E2",
        },
        "RestApiId": Object {
          "Ref": "FederatedApiFederatedRestApi4B626648",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "FederatedApiGroupsTableCounterInitializationCustomResourcePolicyE02B88AD": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "dynamodb:PutItem",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiGroupsTableCounterInitializationCustomResourcePolicyE02B88AD",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiGroupsTableCounterInitializationD0432741": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiGroupsTableCounterInitializationCustomResourcePolicyE02B88AD",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"DynamoDB\\",\\"action\\":\\"putItem\\",\\"parameters\\":{\\"TableName\\":\\"",
              Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
              },
              "\\",\\"Item\\":{\\"tableName\\":{\\"S\\":\\"",
              Object {
                "Ref": "GroupsTable",
              },
              "\\"},\\"count\\":{\\"N\\":\\"0\\"}}},\\"physicalResourceId\\":{\\"id\\":\\"GroupsTable-6519\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiIdentityMachineTableCounterInitializationAB95F47C": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiIdentityMachineTableCounterInitializationCustomResourcePolicy86E7D232",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"DynamoDB\\",\\"action\\":\\"putItem\\",\\"parameters\\":{\\"TableName\\":\\"",
              Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
              },
              "\\",\\"Item\\":{\\"tableName\\":{\\"S\\":\\"",
              Object {
                "Ref": "IdentityMachineTable",
              },
              "\\"},\\"count\\":{\\"N\\":\\"0\\"}}},\\"physicalResourceId\\":{\\"id\\":\\"IdentityMachineTable-8733\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiIdentityMachineTableCounterInitializationCustomResourcePolicy86E7D232": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "dynamodb:PutItem",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiIdentityMachineTableCounterInitializationCustomResourcePolicy86E7D232",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiIdentityMachineTokenTableCounterInitialization08897F69": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiIdentityMachineTokenTableCounterInitializationCustomResourcePolicy4EECC4A9",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"DynamoDB\\",\\"action\\":\\"putItem\\",\\"parameters\\":{\\"TableName\\":\\"",
              Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
              },
              "\\",\\"Item\\":{\\"tableName\\":{\\"S\\":\\"",
              Object {
                "Ref": "IdentityMachineTokenTable",
              },
              "\\"},\\"count\\":{\\"N\\":\\"0\\"}}},\\"physicalResourceId\\":{\\"id\\":\\"IdentityMachineTokenTable-4818\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "FederatedApiIdentityMachineTokenTableCounterInitializationCustomResourcePolicy4EECC4A9": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "dynamodb:PutItem",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiIdentityMachineTokenTableCounterInitializationCustomResourcePolicy4EECC4A9",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiPermissionsApiRoutesLambdaListUserPermission7F5BA43A": Object {
      "DependsOn": Array [
        "FederatedApiPermissionsApiRoutesLambdaListUserPermissionServiceRoleDefaultPolicyB2DDBD15",
        "FederatedApiPermissionsApiRoutesLambdaListUserPermissionServiceRole50BCCC2D",
      ],
      "Properties": Object {
        "Architectures": Array [
          "x86_64",
        ],
        "Code": Object {
          "S3Bucket": "cdk-#####",
          "S3Key": "cdkhash######.zip",
        },
        "Description": "TypescriptFunction Ada/ApiService/FederatedApi/PermissionsApiRoutes/LambdaListUserPermission of list-user-permission.ts",
        "Environment": Object {
          "Variables": Object {
            "API_ACCESS_POLICY_TABLE_NAME": Object {
              "Ref": "ApiAccessPolicyTable",
            },
            "API_ENDPOINT": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "https://",
                  Object {
                    "Ref": "FederatedApiFederatedRestApi4B626648",
                  },
                  ".execute-api.ap-southeast-1.amazonaws.com/prod/",
                ],
              ],
            },
            "API_WAF_ALLOW_RULE_SECRET": Object {
              "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "GROUP_TABLE_NAME": Object {
              "Ref": "GroupsTable",
            },
            "INTERNAL_TOKEN_KMS_KEY": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550ERef",
            },
            "INTERNAL_TOKEN_SECRET_NAME": "sign-internal-token2855ghashx",
            "LOCK_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Ref",
            },
            "RELATIONSHIP_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Ref",
            },
            "REST_API_ID": Object {
              "Ref": "FederatedApiFederatedRestApi4B626648",
            },
            "USER_POOL_ID": Object {
              "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Ref",
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Ref": "referencetoAdaLayer6FB4FEF4Ref",
          },
        ],
        "MemorySize": 1024,
        "Role": Object {
          "Fn::GetAtt": Array [
            "FederatedApiPermissionsApiRoutesLambdaListUserPermissionServiceRole50BCCC2D",
            "Arn",
          ],
        },
        "Runtime": "nodejs16.x",
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
        "Timeout": 30,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "FederatedApiPermissionsApiRoutesLambdaListUserPermissionServiceRole50BCCC2D": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "FederatedApiPermissionsApiRoutesLambdaListUserPermissionServiceRoleDefaultPolicyB2DDBD15": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaApiWafDeploymentSecretCA25FA9ARef",
              },
            },
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackKeyInternalTokenE7D6550EArn",
              },
            },
            Object {
              "Action": "secretsManager:GetSecretValue",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:ap-southeast-1:1111111111:secret:sign-internal-token2855ghashx*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableLocks696688D7Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesLocksC922FC29Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableRelationships0CDF4443Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackEntityManagementTablesRelationshipsAA870878Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": "cognito-idp:AdminGetUser",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Arn",
              },
            },
            Object {
              "Action": "apigateway:GET",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":apigateway:ap-southeast-1::/restapis/",
                    Object {
                      "Ref": "FederatedApiFederatedRestApi4B626648",
                    },
                    "/resources",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableGroupsTable715E88D9Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "GroupsTable",
                    "Arn",
                  ],
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableApiAccessPolicyTable0958670AArn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "ApiAccessPolicyTable",
                    "Arn",
                  ],
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiPermissionsApiRoutesLambdaListUserPermissionServiceRoleDefaultPolicyB2DDBD15",
        "Roles": Array [
          Object {
            "Ref": "FederatedApiPermissionsApiRoutesLambdaListUserPermissionServiceRole50BCCC2D",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiPretokenGenerationTrigger26A1DE5A": Object {
      "DependsOn": Array [
        "FederatedApiPretokenGenerationTriggerServiceRoleDefaultPolicy1917C9C9",
        "FederatedApiPretokenGenerationTriggerServiceRoleA2CFD17C",
      ],
      "Properties": Object {
        "Architectures": Array [
          "x86_64",
        ],
        "Code": Object {
          "S3Bucket": "cdk-#####",
          "S3Key": "cdkhash######.zip",
        },
        "Description": "TypescriptFunction Ada/ApiService/FederatedApi/PretokenGenerationTrigger of pretoken-generation-trigger.ts",
        "Environment": Object {
          "Variables": Object {
            "ADMIN_EMAIL": Object {
              "Ref": "referencetoAdaadminEmail7EA005BFRef",
            },
            "AUTO_ASSOCIATE_ADMIN": Object {
              "Ref": "referencetoAdaautoAssociateAdminAC12C094Ref",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "COUNTER_TABLE_NAME": Object {
              "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Ref",
            },
            "GROUP_TABLE_NAME": Object {
              "Ref": "GroupsTable",
            },
            "USER_POOL_ID": Object {
              "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Ref",
            },
          },
        },
        "Handler": "index.handler",
        "MemorySize": 1024,
        "Role": Object {
          "Fn::GetAtt": Array [
            "FederatedApiPretokenGenerationTriggerServiceRoleA2CFD17C",
            "Arn",
          ],
        },
        "Runtime": "nodejs16.x",
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
        "Timeout": 30,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "FederatedApiPretokenGenerationTriggerCognitoIdpInvokePermissionD32726DB": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W24",
              "reason": "InvokeFunction permissions are intentionally granted.",
            },
          ],
        },
      },
      "Properties": Object {
        "Action": "lambda:invokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "FederatedApiPretokenGenerationTrigger26A1DE5A",
            "Arn",
          ],
        },
        "Principal": "cognito-idp.amazonaws.com",
        "SourceArn": Object {
          "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Arn",
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "FederatedApiPretokenGenerationTriggerServiceRoleA2CFD17C": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "FederatedApiPretokenGenerationTriggerServiceRoleDefaultPolicy1917C9C9": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Ref": "referencetoAdaCommonStackNestedStackCommonStackNestedStackResourceD51B693FOutputsAdaCommonStackCounterTable5D6ADA16Arn",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": "cognito-idp:AdminUpdateUserAttributes",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Arn",
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableGroupsTable715E88D9Arn",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "GroupsTable",
                    "Arn",
                  ],
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiPretokenGenerationTriggerServiceRoleDefaultPolicy1917C9C9",
        "Roles": Array [
          Object {
            "Ref": "FederatedApiPretokenGenerationTriggerServiceRoleA2CFD17C",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiUpdateUserPoolCustomResourcePolicy07A34A20": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "cognito-idp:UpdateUserPool",
              "Effect": "Allow",
              "Resource": Object {
                "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Arn",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "FederatedApiUpdateUserPoolCustomResourcePolicy07A34A20",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "FederatedApiUpdateUserPoolF2F35F71": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "FederatedApiUpdateUserPoolCustomResourcePolicy07A34A20",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"CognitoIdentityServiceProvider\\",\\"action\\":\\"updateUserPool\\",\\"parameters\\":{\\"UserPoolId\\":\\"",
              Object {
                "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Ref",
              },
              "\\",\\"LambdaConfig\\":{\\"PreTokenGeneration\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiPretokenGenerationTrigger26A1DE5A",
                  "Arn",
                ],
              },
              "\\"},\\"AdminCreateUserConfig\\":{\\"AllowAdminCreateUserOnly\\":true},\\"UserPoolAddOns\\":{\\"AdvancedSecurityMode\\":\\"",
              Object {
                "Ref": "referencetoAdaadvancedSecurityModeA861D946Ref",
              },
              "\\"}},\\"physicalResourceId\\":{\\"id\\":\\"UpdateUserPool-1234567890123\\"}}",
            ],
          ],
        },
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679F53Fac002430Cb0Da5B7982Bd22872D164C4C",
            "Arn",
          ],
        },
        "Update": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"CognitoIdentityServiceProvider\\",\\"action\\":\\"updateUserPool\\",\\"parameters\\":{\\"UserPoolId\\":\\"",
              Object {
                "Ref": "referencetoAdaCognitoAuthNestedStackCognitoAuthNestedStackResource933F913EOutputsAdaCognitoAuthUserPoolBD7CD0F7Ref",
              },
              "\\",\\"LambdaConfig\\":{\\"PreTokenGeneration\\":\\"",
              Object {
                "Fn::GetAtt": Array [
                  "FederatedApiPretokenGenerationTrigger26A1DE5A",
                  "Arn",
                ],
              },
              "\\"},\\"AdminCreateUserConfig\\":{\\"AllowAdminCreateUserOnly\\":true},\\"UserPoolAddOns\\":{\\"AdvancedSecurityMode\\":\\"",
              Object {
                "Ref": "referencetoAdaadvancedSecurityModeA861D946Ref",
              },
              "\\"}},\\"physicalResourceId\\":{\\"id\\":\\"UpdateUserPool-1234567890123\\"}}",
            ],
          ],
        },
      },
      "Type": "Custom::AWS",
      "UpdateReplacePolicy": "Delete",
    },
    "GroupsTable": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AttributeDefinitions": Array [
          Object {
            "AttributeName": "groupId",
            "AttributeType": "S",
          },
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "KeySchema": Array [
          Object {
            "AttributeName": "groupId",
            "KeyType": "HASH",
          },
        ],
        "PointInTimeRecoverySpecification": Object {
          "PointInTimeRecoveryEnabled": true,
        },
        "SSESpecification": Object {
          "KMSMasterKeyId": Object {
            "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableGroupsTable715E88D9Arn",
          },
          "SSEEnabled": true,
          "SSEType": "KMS",
        },
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::DynamoDB::Table",
      "UpdateReplacePolicy": "Delete",
    },
    "IdentityMachineTable": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AttributeDefinitions": Array [
          Object {
            "AttributeName": "machineId",
            "AttributeType": "S",
          },
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "KeySchema": Array [
          Object {
            "AttributeName": "machineId",
            "KeyType": "HASH",
          },
        ],
        "PointInTimeRecoverySpecification": Object {
          "PointInTimeRecoveryEnabled": true,
        },
        "SSESpecification": Object {
          "KMSMasterKeyId": Object {
            "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableIdentityMachineTableD776DA41Arn",
          },
          "SSEEnabled": true,
          "SSEType": "KMS",
        },
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::DynamoDB::Table",
      "UpdateReplacePolicy": "Delete",
    },
    "IdentityMachineTokenTable": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AttributeDefinitions": Array [
          Object {
            "AttributeName": "machineId",
            "AttributeType": "S",
          },
          Object {
            "AttributeName": "tokenId",
            "AttributeType": "S",
          },
          Object {
            "AttributeName": "clientId",
            "AttributeType": "S",
          },
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "GlobalSecondaryIndexes": Array [
          Object {
            "IndexName": "Token-ClientId7893ghashx",
            "KeySchema": Array [
              Object {
                "AttributeName": "clientId",
                "KeyType": "HASH",
              },
            ],
            "Projection": Object {
              "ProjectionType": "ALL",
            },
          },
        ],
        "KeySchema": Array [
          Object {
            "AttributeName": "machineId",
            "KeyType": "HASH",
          },
          Object {
            "AttributeName": "tokenId",
            "KeyType": "RANGE",
          },
        ],
        "PointInTimeRecoverySpecification": Object {
          "PointInTimeRecoveryEnabled": true,
        },
        "SSESpecification": Object {
          "KMSMasterKeyId": Object {
            "Ref": "referencetoAdaKMSStackNestedStackKMSStackNestedStackResourceA6F3CE60OutputsAdaKMSStackKeyTableIdentityMachineTokenTableC84EAEE4Arn",
          },
          "SSEEnabled": true,
          "SSEType": "KMS",
        },
        "Tags": Array [
          Object {
            "Key": "Application",
            "Value": "Ada",
          },
        ],
      },
      "Type": "AWS::DynamoDB::Table",
      "UpdateReplacePolicy": "Delete",
    },
  },
}
`;
